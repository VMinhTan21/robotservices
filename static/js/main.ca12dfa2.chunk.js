(this["webpackJsonpreact-ros-robot"]=this["webpackJsonpreact-ros-robot"]||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var o=n(6),c=n(1),s=n.n(c),a=n(24),i=n.n(a),r=(n(50),n(51),n(0)),l=n(4),O=n(2),h=n(3),j=n(66),b=n(70),u=n(69),R=function(e){Object(O.a)(n,e);var t=Object(h.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(o.jsx)(j.a,{children:Object(o.jsxs)(b.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:[Object(o.jsx)(b.a.Brand,{href:"#home",children:"React ROS Robot"}),Object(o.jsx)(b.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(o.jsx)(b.a.Collapse,{id:"basic-navbar-nav",children:Object(o.jsxs)(u.a,{className:"mr-auto",children:[Object(o.jsx)(u.a.Link,{href:"/",children:"Home"}),Object(o.jsx)(u.a.Link,{href:"/about",children:"About"})]})})]})})}}]),n}(c.Component),d=function(e){Object(O.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(o.jsx)(j.a,{className:"text-center",children:Object(o.jsx)("p",{children:"RIOTU Lab \xa9 2020"})})}}]),n}(c.Component),E=n(42),v=n(11),_=n(44),p={ROSBRIDGE_SERVER_IP:"192.168.8.101",ROSBRIDGE_SERVER_PORT:"9090",RECONNECTION_TIMER:3e3,CMD_VEL_TOPIC:"/cmd_vel",ODOM_TOPIC:"/odom",POSE_TOPIC:"/robot_pose"},S=function(e){Object(O.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={connected:!1,ros:null},e.init_connection(),e}return Object(l.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established!"),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection is closed!"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+p.ROSBRIDGE_SERVER_IP+":"+p.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem ")}}),p.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+p.ROSBRIDGE_SERVER_IP+":"+p.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("ws://"+p.ROSBRIDGE_SERVER_IP+":"+p.ROSBRIDGE_SERVER_PORT),console.log("connection problem ")}}},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(_.a,{className:"text-center m-3",variant:this.state.connected?"success":"danger",children:this.state.connected?"Robot Connected":"Robot Disconnected"})})}}]),n}(c.Component),m=n(67),x=n(68),w=n(37),g=function(e){Object(O.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={ros:null,x:0,y:0,orientation:0,linear_velocity:0,angular_velocity:0},e.init_connection(),e}return Object(l.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established in Teleoperation Component!"),console.log(e.state.ros),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection is closed!"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+p.ROSBRIDGE_SERVER_IP+":"+p.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem ")}}),p.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+p.ROSBRIDGE_SERVER_IP+":"+p.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("ws://"+p.ROSBRIDGE_SERVER_IP+":"+p.ROSBRIDGE_SERVER_PORT),console.log("connection problem ")}}},{key:"componentDidMount",value:function(){this.getRobotState()}},{key:"getRobotState",value:function(){var e=this;new window.ROSLIB.Topic({ros:this.state.ros,name:p.POSE_TOPIC,messageType:"geometry_msgs/PoseWithCovarianceStamped"}).subscribe((function(t){e.setState({x:t.pose.pose.position.x.toFixed(2)}),e.setState({y:t.pose.pose.position.y.toFixed(2)}),e.setState({orientation:e.getOrientationFromQuaternion(t.pose.pose.orientation).toFixed(2)})})),new window.ROSLIB.Topic({ros:this.state.ros,name:p.ODOM_TOPIC,messageType:"nav_msgs/Odometry"}).subscribe((function(t){e.setState({linear_velocity:t.twist.twist.linear.x.toFixed(2)}),e.setState({angular_velocity:t.twist.twist.angular.z.toFixed(2)})}))}},{key:"getOrientationFromQuaternion",value:function(e){var t=new w.b(e.x,e.y,e.z,e.w);return(new w.a).setFromQuaternion(t)._z*(180/Math.PI)}},{key:"render",value:function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)(m.a,{children:Object(o.jsxs)(x.a,{children:[Object(o.jsx)("h4",{className:"mt-4",children:"Position"}),Object(o.jsxs)("p",{className:"mt-0",children:["x: ",this.state.x]}),Object(o.jsxs)("p",{className:"mt-0",children:["y: ",this.state.y]}),Object(o.jsxs)("p",{className:"mt-0",children:["Orientation: ",this.state.orientation]})]})}),Object(o.jsx)(m.a,{children:Object(o.jsxs)(x.a,{children:[Object(o.jsx)("h4",{className:"mt-4",children:"Velocities"}),Object(o.jsxs)("p",{className:"mt-0",children:["Linear Velocity: ",this.state.linear_velocity]}),Object(o.jsxs)("p",{className:"mt-0",children:["Angular Velocity: ",this.state.angular_velocity]})]})})]})}}]),n}(c.Component),I=n(12),y=n(41),f=function(e){Object(O.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={ros:null},e.init_connection(),e.handleMove=e.handleMove.bind(Object(I.a)(e)),e.handleStop=e.handleStop.bind(Object(I.a)(e)),e}return Object(l.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established in Teleoperation Component!"),console.log(e.state.ros),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection is closed!"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+p.ROSBRIDGE_SERVER_IP+":"+p.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem ")}}),p.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+p.ROSBRIDGE_SERVER_IP+":"+p.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("ws://"+p.ROSBRIDGE_SERVER_IP+":"+p.ROSBRIDGE_SERVER_PORT),console.log("connection problem ")}}},{key:"handleMove",value:function(e){console.log("handle move");var t=new window.ROSLIB.Topic({ros:this.state.ros,name:p.CMD_VEL_TOPIC,messageType:"geometry_msgs/Twist"}),n=new window.ROSLIB.Message({linear:{x:e.y/50,y:0,z:0},angular:{x:0,y:0,z:-e.x/50}});t.publish(n)}},{key:"handleStop",value:function(e){console.log("handle stop");var t=new window.ROSLIB.Topic({ros:this.state.ros,name:p.CMD_VEL_TOPIC,messageType:"geometry_msgs/Twist"}),n=new window.ROSLIB.Message({linear:{x:0,y:0,z:0},angular:{x:0,y:0,z:0}});t.publish(n)}},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(y.Joystick,{size:100,baseColor:"#EEEEEE",stickColor:"#BBBBBB",move:this.handleMove,stop:this.handleStop})})}}]),n}(c.Component),T=function(e){Object(O.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={ros:null},e.view_map=e.view_map.bind(Object(I.a)(e)),e}return Object(l.a)(n,[{key:"init_connection",value:function(){this.state.ros=new window.ROSLIB.Ros,console.log("Map:"+this.state.ros);try{this.state.ros.connect("ws://"+p.ROSBRIDGE_SERVER_IP+":"+p.ROSBRIDGE_SERVER_PORT)}catch(e){console.log("ws://"+p.ROSBRIDGE_SERVER_IP+":"+p.ROSBRIDGE_SERVER_PORT),console.log("cannot connect to the WS robot. Try again after 1 second")}}},{key:"componentDidMount",value:function(){this.init_connection(),console.log("Map: componentDidMount"+this.state.ros),this.view_map()}},{key:"view_map",value:function(){var e=new window.ROS2D.Viewer({divID:"nav_div",width:640,height:480});new window.NAV2D.OccupancyGridClientNav({ros:this.state.ros,rootObject:e.scene,viewer:e,serverName:"/move_base",withOrientation:!0})}},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)("div",{id:"nav_div",children:"Viewer"})})}}]),n}(c.Component),B=function(e){Object(O.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsxs)(j.a,{children:[Object(o.jsx)("h1",{className:"text-center mt-3",children:"Robot Control Page"}),Object(o.jsx)(m.a,{children:Object(o.jsx)(x.a,{children:Object(o.jsx)(S,{})})}),Object(o.jsx)(m.a,{children:Object(o.jsx)(x.a,{children:Object(o.jsx)(f,{})})}),Object(o.jsxs)(m.a,{children:[" ",Object(o.jsx)(x.a,{children:Object(o.jsx)(g,{})}),Object(o.jsxs)(x.a,{children:[Object(o.jsx)("h1",{children:"MAP"}),Object(o.jsx)(T,{})]})]})]})})}}]),n}(c.Component),P=function(e){Object(O.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"About"}),Object(o.jsx)("p",{children:"This react app controls and monitors ROS-enabled robots through a Web Interface"})]})}}]),n}(c.Component),C=function(e){Object(O.a)(n,e);var t=Object(h.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(o.jsx)(j.a,{children:Object(o.jsx)(E.a,{children:Object(o.jsxs)(v.c,{children:[Object(o.jsx)(v.a,{path:"/",exact:!0,component:B}),Object(o.jsx)(v.a,{path:"/about",exact:!0,component:P})]})})})}}]),n}(c.Component);var D=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(R,{}),Object(o.jsx)(C,{}),Object(o.jsx)(d,{})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),o(e),c(e),s(e),a(e)}))};i.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(D,{})}),document.getElementById("root")),V()}},[[64,1,2]]]);
//# sourceMappingURL=main.ca12dfa2.chunk.js.map