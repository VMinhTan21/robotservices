(this["webpackJsonpreact-ros-robot"]=this["webpackJsonpreact-ros-robot"]||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var o=n(6),c=n(1),s=n.n(c),a=n(26),i=n.n(a),r=(n(50),n(51),n(0)),l=n(4),O=n(2),R=n(3),d=n(66),u=n(71),h=n(70),j=function(e){Object(O.a)(n,e);var t=Object(R.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(o.jsx)(d.a,{children:Object(o.jsxs)(u.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:[Object(o.jsx)(u.a.Brand,{href:"#home",children:"React ROS Robot"}),Object(o.jsx)(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(o.jsx)(u.a.Collapse,{id:"basic-navbar-nav",children:Object(o.jsxs)(h.a,{className:"mr-auto",children:[Object(o.jsx)(h.a.Link,{href:"/",children:"Home"}),Object(o.jsx)(h.a.Link,{href:"/about",children:"About"})]})})]})})}}]),n}(c.Component),b=function(e){Object(O.a)(n,e);var t=Object(R.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(o.jsx)(d.a,{className:"text-center",children:Object(o.jsx)("p",{children:"RIOTU Lab \xa9 2020"})})}}]),n}(c.Component),_=n(42),S=n(12),E=n(44),m={ROSBRIDGE_SERVER_IP:"192.168.8.101",ROSBRIDGE_SERVER_PORT:"9090",RECONNECTION_TIMER:3e3,CMD_VEL_TOPIC:"/cmd_vel",ODOM_TOPIC:"/odom",POSE_TOPIC:"/robot_pose"},v=function(e){Object(O.a)(n,e);var t=Object(R.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={connected:!1,ros:null},e.init_connection(),e}return Object(l.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established!"),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection is closed!"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem ")}}),m.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT),console.log("connection problem ")}}},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(E.a,{className:"text-center m-3",variant:this.state.connected?"success":"danger",children:this.state.connected?"Robot Connected":"Robot Disconnected"})})}}]),n}(c.Component),p=n(67),w=n(68),g=n(37),x=function(e){Object(O.a)(n,e);var t=Object(R.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={ros:null,x:0,y:0,orientation:0,linear_velocity:0,angular_velocity:0},e.init_connection(),e}return Object(l.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established in Teleoperation Component!"),console.log(e.state.ros),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection is closed!"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem ")}}),m.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT),console.log("connection problem ")}}},{key:"componentDidMount",value:function(){this.getRobotState()}},{key:"getRobotState",value:function(){var e=this;new window.ROSLIB.Topic({ros:this.state.ros,name:m.POSE_TOPIC,messageType:"geometry_msgs/PoseWithCovarianceStamped"}).subscribe((function(t){e.setState({x:t.pose.pose.position.x.toFixed(2)}),e.setState({y:t.pose.pose.position.y.toFixed(2)}),e.setState({orientation:e.getOrientationFromQuaternion(t.pose.pose.orientation).toFixed(2)})})),new window.ROSLIB.Topic({ros:this.state.ros,name:m.ODOM_TOPIC,messageType:"nav_msgs/Odometry"}).subscribe((function(t){e.setState({linear_velocity:t.twist.twist.linear.x.toFixed(2)}),e.setState({angular_velocity:t.twist.twist.angular.z.toFixed(2)})}))}},{key:"getOrientationFromQuaternion",value:function(e){var t=new g.b(e.x,e.y,e.z,e.w);return(new g.a).setFromQuaternion(t)._z*(180/Math.PI)}},{key:"render",value:function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)(p.a,{children:Object(o.jsxs)(w.a,{children:[Object(o.jsx)("h4",{className:"mt-4",children:"Position"}),Object(o.jsxs)("p",{className:"mt-0",children:["x: ",this.state.x]}),Object(o.jsxs)("p",{className:"mt-0",children:["y: ",this.state.y]}),Object(o.jsxs)("p",{className:"mt-0",children:["Orientation: ",this.state.orientation]})]})}),Object(o.jsx)(p.a,{children:Object(o.jsxs)(w.a,{children:[Object(o.jsx)("h4",{className:"mt-4",children:"Velocities"}),Object(o.jsxs)("p",{className:"mt-0",children:["Linear Velocity: ",this.state.linear_velocity]}),Object(o.jsxs)("p",{className:"mt-0",children:["Angular Velocity: ",this.state.angular_velocity]})]})})]})}}]),n}(c.Component),I=n(11),y=n(41),f=function(e){Object(O.a)(n,e);var t=Object(R.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={ros:null},e.init_connection(),e.handleMove=e.handleMove.bind(Object(I.a)(e)),e.handleStop=e.handleStop.bind(Object(I.a)(e)),e}return Object(l.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established in Teleoperation Component!"),console.log(e.state.ros),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection is closed!"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem ")}}),m.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT),console.log("connection problem ")}}},{key:"handleMove",value:function(e){console.log("handle move");var t=new window.ROSLIB.Topic({ros:this.state.ros,name:m.CMD_VEL_TOPIC,messageType:"geometry_msgs/Twist"}),n=new window.ROSLIB.Message({linear:{x:e.y/50,y:0,z:0},angular:{x:0,y:0,z:-e.x/50}});t.publish(n)}},{key:"handleStop",value:function(e){console.log("handle stop");var t=new window.ROSLIB.Topic({ros:this.state.ros,name:m.CMD_VEL_TOPIC,messageType:"geometry_msgs/Twist"}),n=new window.ROSLIB.Message({linear:{x:0,y:0,z:0},angular:{x:0,y:0,z:0}});t.publish(n)}},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(y.Joystick,{size:100,baseColor:"#EEEEEE",stickColor:"#BBBBBB",move:this.handleMove,stop:this.handleStop})})}}]),n}(c.Component),T=function(e){Object(O.a)(n,e);var t=Object(R.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={ros:null},e.view_map=e.view_map.bind(Object(I.a)(e)),e}return Object(l.a)(n,[{key:"init_connection",value:function(){this.state.ros=new window.ROSLIB.Ros,console.log("Map:"+this.state.ros);try{this.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(e){console.log("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT),console.log("cannot connect to the WS robot. Try again after 1 second")}}},{key:"componentDidMount",value:function(){this.init_connection(),console.log("Map: componentDidMount"+this.state.ros),this.view_map()}},{key:"view_map",value:function(){var e=new window.ROS2D.Viewer({divID:"nav_div",width:640,height:480});new window.NAV2D.OccupancyGridClientNav({ros:this.state.ros,rootObject:e.scene,viewer:e,serverName:"/move_base",withOrientation:!0})}},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)("div",{id:"nav_div",children:"Viewer"})})}}]),n}(c.Component),B=n(69),C=function(e){Object(O.a)(n,e);var t=Object(R.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={ros:null},e.init_connection(),e.sendCommand=e.sendCommand.bind(Object(I.a)(e)),e}return Object(l.a)(n,[{key:"sendCommand",value:function(e){console.log("SetGoal_1 sent command");var t=new window.ROSLIB.Service({ros:this.state.ros,name:"/setgoal/setgoal",serviceType:"setgoal/msgs"}),n=new window.ROSLIB.ServiceRequest({package_name:"navstack_pub",launch_file:"set_goals1"});t.callService(n,(function(e){console.log("Service call: ",e)}))}},{key:"init_connection",value:function(){this.setState({ros:new window.ROSLIB.Ros});try{this.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT),console.log("SetGoal_2 - Connected")}catch(e){console.log("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT),console.log("SetGoal_1 - cannot connect to the WS robot. Try again after 1 second")}}},{key:"sendCommand",value:function(){console.log("SetGoal_1 sent command")}},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(B.a,{onClick:this.sendCommand,children:"SET GOAL 1"})})}}]),n}(c.Component),P=function(e){Object(O.a)(n,e);var t=Object(R.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={ros:null},e.init_connection(),e.sendCommand=e.sendCommand.bind(Object(I.a)(e)),e}return Object(l.a)(n,[{key:"init_connection",value:function(){this.state.ros=new window.ROSLIB.Ros;try{this.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT),console.log("SetGoal_2 - Connected")}catch(e){console.log("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT),console.log("SetGoal_2 - cannot connect to the WS robot. Try again after 1 second")}}},{key:"sendCommand",value:function(e){console.log("SetGoal_2 sent command");var t=new window.ROSLIB.Topic({ros:this.state.ros,name:"/run_command",messageType:"std_msgs/String"}),n=new window.ROSLIB.Message({data:"rosrun your_package your_executable"});t.publish(n)}},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(B.a,{onClick:this.sendCommand,children:"SET GOAL 2"})})}}]),n}(c.Component),D=function(e){Object(O.a)(n,e);var t=Object(R.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsxs)(d.a,{children:[Object(o.jsx)("h1",{className:"text-center mt-3",children:"Robot Control Page"}),Object(o.jsx)(p.a,{children:Object(o.jsx)(w.a,{children:Object(o.jsx)(v,{})})}),Object(o.jsx)(p.a,{children:Object(o.jsxs)(w.a,{children:[Object(o.jsx)(f,{}),Object(o.jsx)(C,{}),Object(o.jsx)(P,{})]})}),Object(o.jsxs)(p.a,{children:[" ",Object(o.jsx)(w.a,{children:Object(o.jsx)(x,{})}),Object(o.jsxs)(w.a,{children:[Object(o.jsx)("h1",{children:"MAP"}),Object(o.jsx)(T,{})]})]})]})})}}]),n}(c.Component),G=function(e){Object(O.a)(n,e);var t=Object(R.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"About"}),Object(o.jsx)("p",{children:"This react app controls and monitors ROS-enabled robots through a Web Interface"})]})}}]),n}(c.Component),V=function(e){Object(O.a)(n,e);var t=Object(R.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(o.jsx)(d.a,{children:Object(o.jsx)(_.a,{children:Object(o.jsxs)(S.c,{children:[Object(o.jsx)(S.a,{path:"/",exact:!0,component:D}),Object(o.jsx)(S.a,{path:"/about",exact:!0,component:G})]})})})}}]),n}(c.Component);var k=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(j,{}),Object(o.jsx)(V,{}),Object(o.jsx)(b,{})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,72)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),o(e),c(e),s(e),a(e)}))};i.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(k,{})}),document.getElementById("root")),L()}},[[64,1,2]]]);
//# sourceMappingURL=main.de21e6d1.chunk.js.map